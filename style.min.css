:root{--primary-bg:#eef1f5;--secondary-bg:#ffffff;--text-color:#333;--primary-accent:#4a90e2;--primary-accent-darker:#357ABD;--border-color:#d1d8e0;--hint-color:#5a5a5a;--correct-bg:#d4edda;--correct-text:#155724;--correct-border:#28a745;--incorrect-bg:#f8d7da;--incorrect-text:#721c24;--incorrect-border:#dc3545;--sidebar-width:280px;--sidebar-width-collapsed:60px;--question-pane-width:380px;--header-height-mobile:50px}body.dark-mode{--primary-bg:#2c3e50;--secondary-bg:#34495e;--text-color:#ecf0f1;--primary-accent:#5dade2;--primary-accent-darker:#3498db;--border-color:#4a6179;--hint-color:#bdc3c7;--correct-bg:#27ae60;--correct-text:#ffffff;--correct-border:#2ecc71;--incorrect-bg:#c0392b;--incorrect-text:#ffffff;--incorrect-border:#e74c3c}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;margin:0;padding:0;background-color:var(--primary-bg);color:var(--text-color);line-height:1.6;height:100vh;overflow:hidden}#app-container-layout{display:flex;height:100vh;width:100%;overflow:hidden}#left-sidebar-pane{width:var(--sidebar-width);min-width:var(--sidebar-width);background-color:var(--secondary-bg);border-right:1px solid var(--border-color);display:flex;flex-direction:column;transition:width 0.3s ease-in-out,min-width 0.3s ease-in-out;position:relative;z-index:20}#left-sidebar-pane.collapsed{width:var(--sidebar-width-collapsed);min-width:var(--sidebar-width-collapsed)}#left-sidebar-pane.collapsed .nav-title-full,#left-sidebar-pane.collapsed .sidebar-title-full{display:none}#left-sidebar-pane.collapsed .sidebar-title-collapsed{display:inline}#left-sidebar-pane.collapsed #settings-panel .setting-item label{justify-content:center}#left-sidebar-pane.collapsed #settings-panel .setting-item input[type="checkbox"]{margin-right:0}.sidebar-header{padding:10px;background-color:var(--primary-accent);color:#fff;text-align:center;flex-shrink:0;display:flex;align-items:center;justify-content:space-between;height:var(--header-height-mobile)}.sidebar-header h2{margin:0;font-size:1.4em;flex-grow:1;text-align:center}#sidebar-toggle-btn{background:none;border:none;color:#fff;font-size:1.5em;cursor:pointer;padding:0 10px;display:inline-block}#sidebar-toggle-btn .arrow-left{transform:rotate(180deg)}#sidebar-scrollable-content{flex-grow:1;overflow-y:auto}#sections-nav{padding:15px 10px}#sections-nav h3,#sections-nav h4{margin-top:0;margin-bottom:8px;color:var(--primary-accent-darker)}#sections-nav h4{font-size:.95em;margin-left:5px;margin-top:10px;color:var(--text-color);opacity:.8}#sections-nav #random-quiz-sections{display:flex;flex-direction:column;align-items:center}#sections-nav button,#startRandomQuizBtnSidebar{display:block;width:100%;text-align:left;padding:8px 10px;margin-bottom:5px;background-color:#fff0;color:var(--text-color);border:1px solid #fff0;border-radius:4px;font-size:.9em;cursor:pointer}#sections-nav button:hover{background-color:var(--primary-bg);border-color:var(--border-color)}#startRandomQuizBtnSidebar{margin-top:15px;background-color:var(--primary-accent)!important;color:#fff;text-align:center}#startRandomQuizBtnSidebar:hover{background-color:var(--primary-accent-darker)}#settings-panel{padding:15px 10px;border-top:1px solid var(--border-color);flex-shrink:0}#settings-panel h3{margin-top:0;margin-bottom:10px;font-size:1.1em;color:var(--primary-accent-darker)}#settings-panel .setting-item{display:flex;align-items:center;margin-bottom:8px}#settings-panel .setting-item label{margin-bottom:0;display:flex;align-items:center;width:100%;font-size:.9em;cursor:pointer}#settings-panel input[type="checkbox"]{margin-right:8px;vertical-align:middle}.sidebar-footer{padding:10px 15px;text-align:center;font-size:.8em;color:var(--hint-color);border-top:1px solid var(--border-color);background-color:var(--secondary-bg);flex-shrink:0}#question-interaction-pane{width:var(--question-pane-width);min-width:300px;background-color:var(--secondary-bg);border-right:1px solid var(--border-color);padding:0;overflow-y:auto;display:flex;flex-direction:column;position:relative}#mobile-header{display:none;background-color:var(--primary-accent);color:#fff;padding:0 15px;align-items:center;justify-content:space-between;height:var(--header-height-mobile);flex-shrink:0;z-index:15}#mobile-header span:last-child{font-weight:700}#mobile-sidebar-toggle{background:none;border:none;color:#fff;font-size:1.6em;cursor:pointer}#quiz-active-message,#quiz-content-area,#end-screen-content{padding:20px;flex-grow:1}.hidden-view{display:none!important}.active-view{display:block}#quiz-active-message{text-align:center;margin-top:30px;color:var(--hint-color)}#quiz-active-message p{font-size:1.1em}#quiz-status-header{justify-content:space-between;align-items:center;margin-bottom:15px;padding:10px;background-color:var(--primary-bg);border-radius:5px;font-size:.9em;font-weight:700}#quiz-status-header #current-quiz-title{color:var(--primary-accent-darker);flex-grow:1;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;margin-right:10px}#question-display{margin-bottom:15px;padding:12px;background-color:var(--primary-bg);border-left:4px solid var(--primary-accent);border-radius:4px}#question-display h3{margin-top:0;margin-bottom:5px;font-size:1.15em}.hint{font-style:italic;color:var(--hint-color);font-size:.9em;margin-top:5px;display:block}#answer-input-area{margin-bottom:15px}#mcq-options-container button{display:block;width:100%;margin:6px 0;padding:10px;background-color:var(--secondary-bg);color:var(--text-color);border:1px solid var(--border-color);border-radius:4px;font-size:.95em;text-align:left}#mcq-options-container button:hover:not(.selected){background-color:var(--primary-bg)}#mcq-options-container button.selected{background-color:var(--primary-accent);color:#fff;border-color:var(--primary-accent-darker)}#feedback-display{padding:12px;margin-top:10px;border-radius:4px;text-align:left}#feedback-display.correct{background-color:var(--correct-bg);border-left:4px solid var(--correct-border);color:var(--correct-text)}#feedback-display.incorrect{background-color:var(--incorrect-bg);border-left:4px solid var(--incorrect-border);color:var(--incorrect-text)}#feedback-display p{margin:3px 0;font-size:.95em}.significance-text-class{font-style:italic;margin-top:8px!important;font-size:.9em;display:block}#end-screen-content{text-align:center;padding-top:20px}#end-screen-content h2{color:var(--primary-accent);font-size:1.4em}#map-pane-container{flex-grow:1;position:relative;background-color:#cdd2d8}#map{width:100%;height:100%}#map-overlay-info{position:absolute;top:15px;left:15px;background-color:rgb(0 0 0 / .6);color:#fff;padding:8px 12px;border-radius:4px;font-weight:700;font-size:1.8em;z-index:1000;display:none}button{background-color:var(--primary-accent);color:#fff;border:none;padding:10px 15px;text-align:center;text-decoration:none;display:inline-block;font-size:1em;margin:5px 2px;cursor:pointer;border-radius:5px;transition:background-color 0.2s ease-in-out}button:hover:not(:disabled){background-color:var(--primary-accent-darker)}button:disabled{background-color:#ccc;color:#666;cursor:not-allowed}body.dark-mode button:disabled{background-color:#566573;color:#95a5a6}#submitAnswerBtn,#nextQuestionBtn,#returnToSectionsBtn{display:block;width:100%;padding:12px;font-size:1em;font-weight:700;margin-top:10px}.hint.hidden-by-setting,.significance-text-class.hidden-by-setting{display:none!important}.mobile-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgb(0 0 0 / .5);z-index:99;display:none}.mobile-overlay.active{display:block}.section-item-group{display:flex;align-items:center;margin-bottom:5px}.section-item-group .start-quiz-for-section-btn{flex-grow:1;text-align:left;margin-right:5px;margin-bottom:0}.section-item-group .view-all-for-section-btn{padding:8px 10px;background-color:var(--primary-bg);color:var(--primary-accent);border:1px solid var(--border-color);min-width:40px;flex-shrink:0;margin-bottom:0}.section-item-group .view-all-for-section-btn:hover{background-color:var(--border-color)}#study-mode-content{padding:20px}#study-mode-content h3{color:var(--primary-accent-darker);margin-top:0;margin-bottom:15px;text-align:center}#study-items-list{max-height:calc(100vh - 250px);overflow-y:auto;margin-bottom:15px}.study-item-card{background-color:var(--primary-bg);border:1px solid var(--border-color);border-left:4px solid var(--primary-accent);padding:10px 15px;margin-bottom:10px;border-radius:4px;cursor:pointer}.study-item-card:hover{box-shadow:0 2px 5px rgb(0 0 0 / .1);border-left-color:var(--primary-accent-darker)}.study-item-card h4{margin-top:0;margin-bottom:5px;color:var(--text-color)}.study-item-card p{margin:3px 0;font-size:.9em}.study-item-card .hint{color:var(--hint-color)}#study-mode-content button{margin-right:10px}#sections-nav button{width:auto}.map-marker-label{background:#fff;position:absolute;top:42px;left:15px;font-size:14px!important}#left-sidebar-pane.collapsed{width:var(--sidebar-width-collapsed);min-width:var(--sidebar-width-collapsed);cursor:pointer}#left-sidebar-pane.collapsed .nav-title-full{display:none}#left-sidebar-pane.collapsed .sidebar-title-full{display:none}#left-sidebar-pane.collapsed .sidebar-title-collapsed{display:inline}#left-sidebar-pane.collapsed #settings-panel .setting-item input[type="checkbox"]{margin-right:0}#left-sidebar-pane.collapsed #sidebar-scrollable-content{visibility:hidden;opacity:0;transition:opacity 0.1s ease-in-out,visibility 0.1s ease-in-out}#sidebar-scrollable-content{flex-grow:1;overflow-y:auto;visibility:visible;opacity:1;transition:opacity 0.2s ease-in-out 0.1s,visibility 0.2s ease-in-out 0.1s}.custom-infowindow-content{padding:5px;max-width:250px;font-size:.9em}.custom-infowindow-content h4{margin:0 0 5px 0;font-size:1.1em;color:var(--primary-accent-darker)}.custom-infowindow-content p{margin:3px 0;line-height:1.4}body.dark-mode .custom-infowindow-content{color:var(--text-color);background-color:var(--secondary-bg)}body.dark-mode .custom-infowindow-content h4{color:var(--primary-accent);background-color:var(--secondary-bg)}body.dark-mode .gm-style-iw-c button span,body.dark-mode .gm-style-iw-tc::after{color:var(--primary-accent);background-color:var(--secondary-bg)}#left-sidebar-pane{width:var(--sidebar-width);min-width:250px;background-color:var(--secondary-bg);border-right:1px solid var(--border-color);display:flex;flex-direction:column;height:100vh;transition:width 0.3s ease-in-out,min-width 0.3s ease-in-out;position:relative;z-index:20}#left-sidebar-pane.collapsed{width:var(--sidebar-width-collapsed);min-width:var(--sidebar-width-collapsed);cursor:pointer}#left-sidebar-pane.collapsed #settings-panel h3,#left-sidebar-pane.collapsed #settings-panel .setting-item .nav-title-full{display:none}#left-sidebar-pane.collapsed #settings-panel .setting-item{justify-content:center}#left-sidebar-pane.collapsed #settings-panel .setting-item input[type="checkbox"]{margin-right:0}.sidebar-header{padding:10px;background-color:var(--primary-accent);color:#fff;text-align:center;flex-shrink:0;display:flex;align-items:center;justify-content:space-between;height:var(--header-height-mobile)}#sidebar-scrollable-content{flex-grow:1;overflow-y:auto;visibility:visible;opacity:1;transition:opacity 0.2s ease-in-out 0.1s,visibility 0.2s ease-in-out 0.1s}#left-sidebar-pane.collapsed #settings-panel,#left-sidebar-pane.collapsed #sidebar-scrollable-content{visibility:hidden;opacity:0;transition:opacity 0.1s ease-in-out,visibility 0.1s ease-in-out}#sections-nav{padding:15px 10px}#settings-panel{padding:15px 10px;border-top:1px solid var(--border-color);flex-shrink:0;background-color:var(--secondary-bg)}#settings-panel h3{margin-top:0;margin-bottom:10px;font-size:1.1em;color:var(--primary-accent-darker)}.sidebar-footer{padding:10px 15px;text-align:center;font-size:.8em;color:var(--hint-color);border-top:1px solid var(--border-color);background-color:var(--secondary-bg);flex-shrink:0}#left-sidebar-pane.collapsed #settings-panel h3,#left-sidebar-pane.collapsed #settings-panel .nav-title-full{display:none}#left-sidebar-pane.collapsed #settings-panel .setting-item{justify-content:center}#left-sidebar-pane.collapsed #settings-panel .setting-item input[type="checkbox"]{margin-left:0}#left-sidebar-pane{left:0;top:0;height:100%;transition:width 0.3s ease-in-out,min-width 0.3s ease-in-out,left 0.3s ease-in-out}.sidebar-header{position:relative}#sidebar-toggle-btn{display:inline-block}#mobile-sidebar-close-btn{background:none;border:none;color:#fff;font-size:1.8em;cursor:pointer;padding:0 10px;display:none;position:absolute;top:50%;right:10px;transform:translateY(-50%)}.mobile-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgb(0 0 0 / .5);z-index:99;display:none;opacity:0;transition:opacity 0.3s ease-in-out}.mobile-overlay.active{display:block;opacity:1}@media (max-width:768px){#app-container-layout{flex-direction:column}#sidebar-toggle-btn{display:none!important}#left-sidebar-pane{left:-100%;width:80%;max-width:300px;border-right:1px solid var(--border-color);box-shadow:2px 0 10px rgb(0 0 0 / .2)}#left-sidebar-pane.mobile-sidebar-open{left:0}#left-sidebar-pane.mobile-sidebar-open #mobile-sidebar-close-btn{display:inline-block}#left-sidebar-pane.mobile-sidebar-open .sidebar-title-collapsed{display:none}#left-sidebar-pane.mobile-sidebar-open .sidebar-title-full{display:inline}#left-sidebar-pane.mobile-sidebar-open.collapsed .nav-title-full,#left-sidebar-pane.mobile-sidebar-open.collapsed #settings-panel h3,#left-sidebar-pane.mobile-sidebar-open.collapsed #settings-panel .nav-title-full{display:inline}#left-sidebar-pane.mobile-sidebar-open.collapsed #settings-panel .setting-item{justify-content:flex-start}#left-sidebar-pane.mobile-sidebar-open.collapsed #settings-panel .setting-item input[type="checkbox"]{margin-right:8px}#left-sidebar-pane.collapsed #settings-panel,#left-sidebar-pane.collapsed #sidebar-scrollable-content{visibility:visible;opacity:1;transition:opacity 0.1s ease-in-out,visibility 0.1s ease-in-out}}@media (max-width:900px){#question-interaction-pane{min-width:280px}}@media (max-width:768px){#app-container-layout{flex-direction:column;height:auto;overflow-y:auto}#sidebar-toggle-btn{display:none}#mobile-header{display:flex}#left-sidebar-pane{position:fixed;top:0;left:-100%;width:80%;max-width:300px;height:100%;border-right:1px solid var(--border-color);border-bottom:none;transition:left 0.3s ease-in-out;z-index:100}#left-sidebar-pane.mobile-sidebar-open{left:0;box-shadow:5px 0 15px rgb(0 0 0 / .2)}#left-sidebar-pane.collapsed{width:80%;min-width:auto}#left-sidebar-pane.collapsed .nav-title-full,#left-sidebar-pane.collapsed .sidebar-title-full{display:inline}#left-sidebar-pane.collapsed .sidebar-title-collapsed{display:none}#question-interaction-pane{width:100%;border-right:none;height:calc(100vh - var(--header-height-mobile) - 350px);min-height:200px}#map-pane-container{width:100%;height:350px;flex-grow:0}}